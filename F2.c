void sort_even_odd(int n, int a[])
{
    /* временный массив для устойчивой перестановки */
    int *tmp = (int *)malloc(n * sizeof(int));
    if (!tmp) return;               /* при отказе памяти просто выходим */

    int pos = 0;

    /* сначала копируем чётные элементы в том же порядке */
    for (int i = 0; i < n; ++i)
        if (a[i] % 2 == 0)
            tmp[pos++] = a[i];

    /* затем копируем нечётные элементы, тоже сохраняем порядок */
    for (int i = 0; i < n; ++i)
        if (a[i] % 2 != 0)
            tmp[pos++] = a[i];

    /* возвращаем результат в исходный массив */
    for (int i = 0; i < n; ++i)
        a[i] = tmp[i];

    free(tmp);
}